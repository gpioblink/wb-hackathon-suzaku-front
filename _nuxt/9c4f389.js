(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{285:function(e,t,n){"use strict";n.r(t);n(261);var r=n(8),c=n(133),o=n(134),l=n(268),d=n(269),f=n(262),v=n(21),h=(n(40),n(60),n(78),n(63),n(263)),m=n(75),O=n.n(m);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var c=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var k=function(e,t,n,desc){var r,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(c<3?r(o):c>3?r(t,n,o):r(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},x=function(e){Object(l.a)(h,e);var t,n,d,f,v=_(h);function h(){var e;return Object(c.a)(this,h),(e=v.apply(this,arguments)).host="http://192.168.0.18",e.isInitial=!0,e.lastOpenedMeetingId="",e.friends=[{id:"1",icon:"mdi-flower",name:"山田さん",isCalling:!1,isDialogOpen:!1,meetingURL:"https://teams.microsoft.com/dl/launcher/launcher.html?url=%2F_%23%2Fl%2Fmeetup-join%2F19%3Ameeting_YWQwOGFkZjItODAxZC00ODJjLWI5YzktNDFiZmI1ZWEwYWNl%40thread.v2%2F0%3Fcontext%3D%257b%2522Tid%2522%253a%25224617a0ae-1a92-4482-a833-7bad535b3292%2522%252c%2522Oid%2522%253a%25226c873a17-3b3a-48d7-8fc2-3a82917a84c3%2522%257d%26anon%3Dtrue&type=meetup-join&deeplinkId=8fd865ef-2a91-4739-91a5-a6e2533ddef4&directDl=true&msLaunch=true&enableMobilePage=true&suppressPrompt=true"},{id:"2",icon:"mdi-cat",name:"鈴木さん",isCalling:!1,isDialogOpen:!1,meetingURL:"https://teams.microsoft.com/dl/launcher/launcher.html?url=%2F_%23%2Fl%2Fmeetup-join%2F19%3Ameeting_MmY1ZWE1NWMtN2ZiZi00ZmI0LWFiODItMmIwNzdkNTJjNDQ5%40thread.v2%2F0%3Fcontext%3D%257b%2522Tid%2522%253a%25224617a0ae-1a92-4482-a833-7bad535b3292%2522%252c%2522Oid%2522%253a%25226c873a17-3b3a-48d7-8fc2-3a82917a84c3%2522%257d%26anon%3Dtrue&type=meetup-join&deeplinkId=bbb84715-b586-4ca7-a4d6-49b01da99fcb&directDl=true&msLaunch=true&enableMobilePage=true&suppressPrompt=true"}],e}return Object(o.a)(h,[{key:"startMeeting",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat(this.host,"/").concat(t.id,"/call"),{flag:!1});case 2:return e.next=4,O.a.post("".concat(this.host,"/").concat(t.id,"/led"),{flag:!0});case 4:this.lastOpenedMeetingId=t.id,window.open(t.meetingURL,"_blank");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"updateNotification",value:(d=Object(r.a)(regeneratorRuntime.mark((function e(){var i,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.lastOpenedMeetingId){e.next=11;break}i=0;case 2:if(!(i<this.friends.length)){e.next=11;break}return e.next=5,O.a.get("".concat(this.host,"/").concat(this.friends[i].id,"/call"));case 5:t=e.sent,this.friends[i].isCalling=t.data.flag,console.log(t.data);case 8:++i,e.next=2;break;case 11:this.isInitial=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"checkMeetingFinished",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.lastOpenedMeetingId||document.hidden){e.next=5;break}return e.next=3,O.a.post("".concat(this.host,"/").concat(this.lastOpenedMeetingId,"/led"),{flag:!1});case 3:console.log("meeting id ".concat(this.lastOpenedMeetingId," has closed.")),this.lastOpenedMeetingId="";case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"mounted",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval((function(){t.updateNotification(),t.checkMeetingFinished()}),1e3);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),h}(h.Vue),y=x=k([h.Component],x),w=n(52),component=Object(w.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{cols:"12",lg:"8"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("\n       フレンドリスト\n      ")]),e._v(" "),n("v-card-text",[n("p",[e._v("話したい友達の名前をクリックするとビデオチャットが起動します。")]),e._v(" "),n("p",[e._v("相手からの呼び出しがある場合、右のランプが点灯します。")]),e._v(" "),n("v-list",{attrs:{subheader:"","two-line":""}},e._l(e.friends,(function(t){return n("v-list-item",{key:t.title,attrs:{link:""},on:{click:function(e){e.stopPropagation(),t.isDialogOpen=!0}}},[n("v-list-item-avatar",[n("v-icon",{staticClass:"grey lighten-1",attrs:{dark:""},domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1),e._v(" "),n("v-list-item-action",[t.isCalling?n("v-icon",{attrs:{color:"orange lighten-1"}},[e._v("mdi-bell-ring")]):e.isInitial?n("v-icon",{attrs:{color:"gray lighten-1"}},[e._v("mdi-vanish")]):n("v-icon",{attrs:{color:"gray lighten-1"}},[e._v("mdi-bell-outline")])],1)],1)})),1)],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"600"},model:{value:e.friends[0].isDialogOpen,callback:function(t){e.$set(e.friends[0],"isDialogOpen",t)},expression:"friends[0].isDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("\n        "+e._s(e.friends[0].name)+"とのビデオチャットを開始しますか?\n      ")]),e._v(" "),n("v-card-text",[e._v("始めると相手側の人形に、光と振動で開始を通知します。")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"gray darken-1",text:""},on:{click:function(t){e.friends[0].isDialogOpen=!1}}},[e._v("\n          キャンセル\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",outlined:""},on:{click:function(t){e.startMeeting(e.friends[0]),e.friends[0].isDialogOpen=!1}}},[e._v("\n          始める\n        ")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"600"},model:{value:e.friends[1].isDialogOpen,callback:function(t){e.$set(e.friends[1],"isDialogOpen",t)},expression:"friends[1].isDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("\n        "+e._s(e.friends[1].name)+"とのビデオチャットを開始しますか?\n      ")]),e._v(" "),n("v-card-text",[e._v("始めると相手側の人形に、光と振動で開始を通知します。")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"gray darken-1",text:""},on:{click:function(t){e.friends[1].isDialogOpen=!1}}},[e._v("\n          キャンセル\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",outlined:""},on:{click:function(t){e.startMeeting(e.friends[1]),e.friends[1].isDialogOpen=!1}}},[e._v("\n          始める\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);