(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{438:function(t,e,n){"use strict";n.r(e);n(78);var r=n(12),c=n(20),o=n(36),l=n(37),d=n(28),f=n(15),v=n(19),h=(n(80),n(30),n(40),n(62),n(372)),m=n(103),O=n.n(m);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var k=function(t,e,n,desc){var r,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(c<3?r(o):c>3?r(e,n,o):r(e,n))||o);return c>3&&o&&Object.defineProperty(e,n,o),o},x=function(t){Object(l.a)(h,t);var e,n,d,f,v=_(h);function h(){var t;return Object(c.a)(this,h),(t=v.apply(this,arguments)).host="http://192.168.0.18",t.isInitial=!0,t.lastOpenedMeetingId="",t.friends=[{id:"1",icon:"mdi-flower",name:"山田さん",isCalling:!1,isDialogOpen:!1,meetingURL:"https://teams.microsoft.com/dl/launcher/launcher.html?url=%2F_%23%2Fl%2Fmeetup-join%2F19%3Ameeting_YWQwOGFkZjItODAxZC00ODJjLWI5YzktNDFiZmI1ZWEwYWNl%40thread.v2%2F0%3Fcontext%3D%257b%2522Tid%2522%253a%25224617a0ae-1a92-4482-a833-7bad535b3292%2522%252c%2522Oid%2522%253a%25226c873a17-3b3a-48d7-8fc2-3a82917a84c3%2522%257d%26anon%3Dtrue&type=meetup-join&deeplinkId=8fd865ef-2a91-4739-91a5-a6e2533ddef4&directDl=true&msLaunch=true&enableMobilePage=true&suppressPrompt=true"},{id:"2",icon:"mdi-cat",name:"鈴木さん",isCalling:!1,isDialogOpen:!1,meetingURL:"https://teams.microsoft.com/dl/launcher/launcher.html?url=%2F_%23%2Fl%2Fmeetup-join%2F19%3Ameeting_MmY1ZWE1NWMtN2ZiZi00ZmI0LWFiODItMmIwNzdkNTJjNDQ5%40thread.v2%2F0%3Fcontext%3D%257b%2522Tid%2522%253a%25224617a0ae-1a92-4482-a833-7bad535b3292%2522%252c%2522Oid%2522%253a%25226c873a17-3b3a-48d7-8fc2-3a82917a84c3%2522%257d%26anon%3Dtrue&type=meetup-join&deeplinkId=bbb84715-b586-4ca7-a4d6-49b01da99fcb&directDl=true&msLaunch=true&enableMobilePage=true&suppressPrompt=true"}],t}return Object(o.a)(h,[{key:"startMeeting",value:(f=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("".concat(this.host,"/").concat(e.id,"/call"),{flag:!1});case 2:return t.next=4,O.a.post("".concat(this.host,"/").concat(e.id,"/led"),{flag:!0});case 4:this.lastOpenedMeetingId=e.id,window.open(e.meetingURL,"_blank");case 6:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"updateNotification",value:(d=Object(r.a)(regeneratorRuntime.mark((function t(){var i,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==this.lastOpenedMeetingId){t.next=11;break}i=0;case 2:if(!(i<this.friends.length)){t.next=11;break}return t.next=5,O.a.get("".concat(this.host,"/").concat(this.friends[i].id,"/call"));case 5:e=t.sent,this.friends[i].isCalling=e.data.flag,console.log(e.data);case 8:++i,t.next=2;break;case 11:this.isInitial=!1;case 12:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"checkMeetingFinished",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.lastOpenedMeetingId||document.hidden){t.next=5;break}return t.next=3,O.a.post("".concat(this.host,"/").concat(this.lastOpenedMeetingId,"/led"),{flag:!1});case 3:console.log("meeting id ".concat(this.lastOpenedMeetingId," has closed.")),this.lastOpenedMeetingId="";case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"mounted",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setInterval((function(){e.updateNotification(),e.checkMeetingFinished()}),1e3);case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),h}(h.Vue),y=x=k([h.Component],x),w=n(84),D=n(109),I=n.n(D),j=n(445),R=n(387),C=n(362),F=n(390),M=n(437),V=n(379),L=n(380),P=n(370),N=n(382),Z=n(388),W=n(347),A=n(391),T=n(341),component=Object(w.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{cols:"12",lg:"8"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("\n       フレンドリスト\n      ")]),t._v(" "),n("v-card-text",[n("p",[t._v("話したい友達の名前をクリックするとビデオチャットが起動します。")]),t._v(" "),n("p",[t._v("相手からの呼び出しがある場合、右のランプが点灯します。")]),t._v(" "),n("v-list",{attrs:{subheader:"","two-line":""}},t._l(t.friends,(function(e){return n("v-list-item",{key:e.title,attrs:{link:""},on:{click:function(t){t.stopPropagation(),e.isDialogOpen=!0}}},[n("v-list-item-avatar",[n("v-icon",{staticClass:"grey lighten-1",attrs:{dark:""},domProps:{textContent:t._s(e.icon)}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1),t._v(" "),n("v-list-item-action",[e.isCalling?n("v-icon",{attrs:{color:"orange lighten-1"}},[t._v("mdi-bell-ring")]):t.isInitial?n("v-icon",{attrs:{color:"gray lighten-1"}},[t._v("mdi-vanish")]):n("v-icon",{attrs:{color:"gray lighten-1"}},[t._v("mdi-bell-outline")])],1)],1)})),1)],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"600"},model:{value:t.friends[0].isDialogOpen,callback:function(e){t.$set(t.friends[0],"isDialogOpen",e)},expression:"friends[0].isDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v("\n        山田さんとのビデオチャットを開始しますか?\n      ")]),t._v(" "),n("v-card-text",[t._v("始めると相手側の人形に、光と振動で開始を通知します。")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"gray darken-1",text:""},on:{click:function(e){t.friends[0].isDialogOpen=!1}}},[t._v("\n          キャンセル\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",outlined:""},on:{click:function(e){t.startMeeting(t.friends[0]),t.friends[0].isDialogOpen=!1}}},[t._v("\n          始める\n        ")])],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"600"},model:{value:t.friends[1].isDialogOpen,callback:function(e){t.$set(t.friends[1],"isDialogOpen",e)},expression:"friends[1].isDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v("\n        鈴木さんとのビデオチャットを開始しますか?\n      ")]),t._v(" "),n("v-card-text",[t._v("始めると相手側の人形に、光と振動で開始を通知します。")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"gray darken-1",text:""},on:{click:function(e){t.friends[1].isDialogOpen=!1}}},[t._v("\n          キャンセル\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",outlined:""},on:{click:function(e){t.startMeeting(t.friends[1]),t.friends[1].isDialogOpen=!1}}},[t._v("\n          始める\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;I()(component,{VBtn:j.a,VCard:R.a,VCardActions:C.a,VCardText:C.b,VCardTitle:C.c,VCol:F.a,VDialog:M.a,VIcon:V.a,VList:L.a,VListItem:P.a,VListItemAction:N.a,VListItemAvatar:Z.a,VListItemContent:W.a,VListItemTitle:W.b,VRow:A.a,VSpacer:T.a})}}]);